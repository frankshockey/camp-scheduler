<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camp Scheduler</title>    
    <link rel="stylesheet" href="styles.css">
    <!-- Add Font Awesome for icons -->
    <!-- jsPDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- jspdf-autotable plugin -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <!-- SweetAlert2 Library -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <header>
        <h1>Camp Scheduler</h1>
    </header>
    <main>
        <aside id="menu">
            <button id="add-camp-button">Add Camp</button>
            <button id="add-global-activity-button">Add Activity</button>
            <button id="add-group-button">Add Group</button>
            <button id="export-camp-button">Export Camp</button>
            <button id="save-schedule-button">Save Schedule</button>
            <button id="load-schedule-button">Load Schedule</button>
        </aside>

        <!-- Available Activities Palette -->
        <div id="activity-palette" style="margin: 1rem 0; display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>

        <!-- Main content area for the scheduler -->
        <div id="scheduler-area">
            <h2 id="current-camp" style="display:inline-block; vertical-align:middle;">Camp Scheduler</h2> <!-- This will be updated by script.js -->
            <button id="edit-camp-button" style="display:none; margin-left:10px; vertical-align:middle;">Edit Camp</button>

            <!-- Camp selection display -->
            <div id="camp-display" style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; display: flex; justify-content: center; align-items: center;">
                <span style="padding-left: 1rem;">No camps available</span>
                <select id="camp-selector" style="display: none;">
                    <!-- Camp options will be dynamically added here -->
                </select>
            </div>

            <!-- Container for group schedule boxes -->
            <div id="group-box">
                <!-- Groups will be rendered dynamically by script.js -->
            </div>

            <!-- Camp Information Section -->
            <div id="camp-info-section" style="margin-top: 2rem;">
                <h3>Camp Information</h3>
                <select id="camp-dropdown" style="display: block; margin-bottom: 10px; min-width: 200px; padding: 5px;">
                    <!-- Camp options will be dynamically added here by script.js -->
                </select>
                <div id="info-box" contenteditable="true" style="border: 1px solid #ccc; padding: 10px; min-height: 100px; background-color: #fff;">
                    Click here to add information about the selected camp.
                </div>
            </div>
        </div>
    </main>
    <!-- Firebase App (the core SDK) compat version -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <!-- Firestore SDK compat version -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script>
      console.log('[DEBUG] window.firebase right after CDN scripts:', window.firebase);
    </script>
    <script>
      if (typeof firebase === 'undefined') {
        document.body.innerHTML = '<div style="color:red;font-size:1.2em;padding:2em;">FATAL: Firebase SDK failed to load. Check your internet connection and script order.</div>' + document.body.innerHTML;
        throw new Error('Firebase SDK not loaded');
      }
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyAXURNmxzBTyxb8iR_g6SeYE7a0uHMWnt4",
        authDomain: "camp-scheduler-a683c.firebaseapp.com",
        projectId: "camp-scheduler-a683c",
        storageBucket: "camp-scheduler-a683c.appspot.com",
        messagingSenderId: "874072112945",
        appId: "1:874072112945:web:6a2c1af8d038c090ae3a10"
      };
      // Initialize Firebase
      const app = firebase.initializeApp(firebaseConfig);
      // Initialize Firestore
      window.firebaseDb = firebase.firestore(app);
      console.log('[FIREBASE INIT] window.firebaseDb:', window.firebaseDb);
    </script>
    <script src="script.js"></script>
  </body>
</html>
